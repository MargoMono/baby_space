{% include 'admin/includes/header.twig' %}

<div class="content-wrapper">
    <section class="content-header">
        <h1>
            Панель администратора
            <small>Пользователи</small>
        </h1>
        <ol class="breadcrumb">
            <li><a href="/admin/user/">Пользователи</a></li>
            <li class="active">Добавить пользователя</li>
        </ol>
    </section>

    <section class="content">
        {% if errors is not empty %}
            <div class="col-lg-12 mistake">
                <p>Ошибка:</p>
                <ul>
                    {% for error in errors %}
                        <li>{{ error }}</li>
                    {% endfor %}
                </ul>
            </div>
        {% endif %}
        <div class="col-lg-12 correct">
            <div class="login-form">
                <form action="#" enctype="multipart/form-data" method="post">

                    <p class="title-name">Имя</p>
                    <input type="text" name="name" placeholder="" value="" required minlength="3" maxlength="20">
                    <p class="required">*обязательное поле</p>

                    <p class="title-name">Почта</p>
                    <input type="email" name="email" placeholder="" value="" required>
                    <p class="required">*обязательное поле</p>

                    <p class="title-name">Роль</p>
                    <select name="role_id">
                        {% for role in roleList %}
                            <option value="{{ role.id }}">{{ role.name }}</option>
                        {% endfor %}
                    </select>

                    <p class="title-name">Пароль</p>
                    <input id="password1" type="password" name="password" placeholder="" value="" required>
                    <p class="required">*обязательное поле</p>

                    <p class="title-name">Подтверждение пароля</p>
                    <input  id="password2" type="password" name="password" placeholder="" value="" required>
                    <p class="required">*обязательное поле</p>

                    <br><br>
                    <input type="submit" name="button" class="btn btn-default" value="Сохранить"/>
                </form>
            </div>
        </div>
    </section>
</div>

<script type="text/javascript">
    window.onload = function () {
        document.getElementById("password1").onchange = validatePassword;
        document.getElementById("password2").onchange = validatePassword;
    }

    function validatePassword() {
        let pass2 = document.getElementById("password2").value;
        let pass1 = document.getElementById("password1").value;
        if (pass1 != pass2)
            document.getElementById("password2").setCustomValidity("Пароли не совпадают");
        else
            document.getElementById("password2").setCustomValidity('');
    }
</script>

{% include 'admin/includes/footer.twig' %}
